 {% extends "base.html" %}
 {% load staticfiles %}

 {% block meta-tags%}


    <link rel="stylesheet" type="text/css" href="{% static 'jsgrid/demos/demos.css' %}" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,600,400' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="{% static 'jsgrid/css/jsgrid.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'jsgrid/css/theme.css' %}" />

   <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/u/bs/jszip-2.5.0,pdfmake-0.1.18,dt-1.10.12,af-2.1.2,b-1.2.1,b-colvis-1.2.1,b-flash-1.2.1,b-html5-1.2.1,b-print-1.2.1,cr-1.3.2,fc-3.2.2,fh-3.1.2,kt-2.1.2,r-2.1.0,rr-1.1.2,sc-1.4.2,se-1.2.0/datatables.min.css"/>

  


 {% endblock %}


  {% block contenido%}

<div class="container datos">
    <h1 class="center">Datos de asentamientos relevados</h1>
  


    <table id="tabla-asentamientos" class="display table table-striped table-hover table-condensed " cellspacing="0" width="100%">
      
        <thead>
            <tr>
                <th>Asentamiento</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>Ciudad </br> <input class="form-control input-sm" type="text" placeholder="Buscar Ciudad" /></th>
                
                <th>esta loteada?</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>origen</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>poblador más antiguo</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>poblador más nuevo</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>superficie</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>número de lotes</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>medida de lotes</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>núm. viviendas</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>núm. viviendas precarias</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                <th>núm. de familias</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                    <th>Provision de Agua</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
               <th>Energía</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>
                 <th>Energía</br><input class="form-control input-sm" type="text" placeholder="Buscar" /></th>


            </tr>
           
           
        </thead>



        <tfoot>

         <!--    <tr>
                <th>Ciudad </th>
                <th>Asentamiento</th>
                <th>esta loteada?</th>
                <th>origen</th>
                <th>poblador más antiguo</th>
                <th>poblador más nuevo</th>
                <th>superficie</br></th>
                <th>número de lotes</th>
                <th>medida de lotes</th>
                <th>núm. viviendas</th>
                <th>núm. viviendas precarias</th>
                <th>núm. de familias</th>
                    <th>Provision de Agua</th>
               <th>Energía</th>

            </tr> -->
           
      
          
        </tfoot>
    </table>

      <div id="jsGrid"></div>
</div>




  {% endblock %}


     {% block footer%}




    <!--<script src="{% static 'jsgrid/external/jquery/jquery-1.8.3.js' %}"></script>-->


<script type="text/javascript" src="https://cdn.datatables.net/u/bs/jszip-2.5.0,pdfmake-0.1.18,dt-1.10.12,af-2.1.2,b-1.2.1,b-colvis-1.2.1,b-flash-1.2.1,b-html5-1.2.1,b-print-1.2.1,cr-1.3.2,fc-3.2.2,fh-3.1.2,kt-2.1.2,r-2.1.0,rr-1.1.2,sc-1.4.2,se-1.2.0/datatables.min.js"></script>


<script type="text/javascript">
$(document).ready(function() {

  /* $('#tabla-asentamientos thead th').each( function () {
        var title = $(this).text();
        $(this).html( '<input type="text" placeholder="Search '+title+'" />' );
    } );*/
dominio = "{{ config.dominio }}" ;

   table = $('#tabla-asentamientos').DataTable( {
        "ajax": {
                    url: 'http://'+dominio+'/asentamiento/',
                    dataSrc: ''
                },
         "pageLength": 50,
        "columns": [
                     { data: 'asentamiento'},
                    {  data: 'ciudad' },
                   
                    { data: 'esta_loteada'},
                    { data: 'origen'},
                    { data: 'poblador_mas_antiguo'},
                    { data: 'poblador_mas_nuevo'},
                    { data: 'superficie'},
                    { data: 'numero_lotes'},
                    { data: 'medida_lotes'},
                    { data: 'numero_aprox_viviendas'},
                    { data: 'numero_aprox_viviendas_precarias'},
                    { data: 'numero_familias'},
                     { data: 'agua_tipo_provision'},
                      { data: 'energia_tipo_provision'},
                    {
                        "title": "Mapa",
                        "render": function (data, type, row, meta) {
                            return '<a href="/mapa/#' + data + '">' + "Ven En Mapa" + '</a>';
                        },
                        data:'identificador',


                    }
                                        
                    

      
          
        ],
          fixedColumns: true,
      "ordering": false,
      dom: 'Bfrtip',
        buttons: [
           {
            extend: 'csvHtml5',
            text: 'Bajar CSV',
             filename: 'mapaasentamientos',
             header: true,
            exportOptions: {
                modifier: {
                    search: 'none'
                },
               
            }
        },

        
         {
                extend: 'print',
                 text: 'Imprimir/PDF',
                 header: true,
                customize: function ( win ) {
                    $(win.document.body)
                        .css( 'font-size', '10pt' )
                      
 
                    $(win.document.body).find( 'table' )
                        .addClass( 'compact' )
                        .css( 'font-size', 'inherit' );
                }
            },
            
        ],
        "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.11/i18n/Spanish.json"
            },

        initComplete: function () {
            this.api().columns().every( function () {
                var column = this;
                var select = $('<select class="form-control input-sm"><option value=""></option></select>')
                    .appendTo( $(column.footer()) )
                    .on( 'change', function () {
                        var val = $.fn.dataTable.util.escapeRegex(
                            $(this).val()
                        );
 
                        column
                            .search( val ? '^'+val+'$' : '', true, false )
                            .draw();
                    } );
 
                column.data().unique().sort().each( function ( d, j ) {
                    select.append( '<option value="'+d+'">'+d+'</option>' )
                } );
            } );
        },
        scrollY:   400,
         "scrollX": true,

//        scrollCollapse: true,

    } );




      table.columns().every( function () {
        var that = this;
 
        $( 'input', this.header() ).on( 'keyup change', function () {
            if ( that.search() !== this.value ) {
                that
                    .search( this.value )
                    .draw();
            }
        } );
    } );

    
   




} );
  

</script>

      {% endblock %}
